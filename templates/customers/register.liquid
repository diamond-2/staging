{% comment %}

{% assign accountImage = settings.account_right_image %}
<div class="register-page-wrapper">
  <div class="dia-container">
    <div class="register-page-inner-wrapper">
      <div class="register-form-header">
        <h1>{{ 'Sign Up' }}</h1>
      </div>
      <div class="register-page-two-col-row {% if accountImage == blank %}has_not_right_image{% endif %}">
        <div class="register-form-column">
          <div class="register-form-column-inner">
            <div class="form-wrapper">
              {%- assign formId = 'create_customer' -%}
              {% form 'create_customer', id: formId, class: 'form-validation'  %}
                {% include 'form-status', form: form, form_id: formId %}
                <div class="form__input-wrapper" data-form-input-wrapper>
                  <span class="input_icon">
                    {% include 'input-user-icon' %}
                  </span>
                  <input  class="form__input" placeholder="{{ 'customer.register.first_name' | t }}" type="text" name="customer[first_name]" id="{{ formId }}-FirstName" {% if form.first_name %}value="{{ form.first_name }}"{% endif %} autocomplete="given-name">
                  <span class="msg-error"></span>
                </div>

                <div class="form__input-wrapper" data-form-input-wrapper>
                  <span class="input_icon">
                    {% include 'input-user-icon' %}
                  </span>
                  <input  class="form__input" placeholder="{{ 'customer.register.last_name' | t }}" type="text" name="customer[last_name]" id="{{ formId }}-LastName" {% if form.last_name %}value="{{ form.last_name }}"{% endif %} autocomplete="family-name">
                  <span class="msg-error"></span>
                </div>

                <div class="form__input-wrapper" data-form-input-wrapper>
                  <span class="input_icon">
                    {% include 'input-email-icon' %}
                  </span>
                  <input class="form__input" placeholder="Enter Email"
                  type="email"
                  name="customer[email]"
                  id="{{ formId }}-email"
                  autocorrect="off"
                  autocapitalize="off"
                  autocomplete="email"
                  aria-required="true"
                  {%- if form.errors contains 'email' -%}
                    class="input--error"
                    aria-invalid="true"
                    aria-describedby="{{ formId }}-email-error"
                  {%- endif -%}
                  >
                  <span class="msg-error"></span>
                </div>
                {%- if form.errors contains 'email' -%}
                <span id="{{ formId }}-email-error" class="input-error-message">
                  <span class="visually-hidden">{{ 'general.accessibility.error' | t }} </span>
                  {% include 'icon-error' %}
                  <span>{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}.</span>
                </span>
                {%- endif -%}

                <div class="form__input-wrapper" data-form-input-wrapper>
                  <span class="input_icon">
                    {% include 'input-lock-icon' %}
                  </span>
                  <input  class="form__input" placeholder="{{ 'customer.register.password' | t }}"
                  type="password"
                  name="customer[password]"
                  id="{{ formId }}-password"
                  aria-required="true"
                  {%- if form.errors contains 'password' -%}
                    class="input--error"
                    aria-invalid="true"
                    aria-describedby="{{ formId }}-password-error"
                  {%- endif -%}
                  >
                  <span class="msg-error"></span>
                </div>
                {%- if form.errors contains 'password' -%}
                  <span id="{{ formId}}-password-error" class="input-error-message">
                    {% include 'icon-error' %}
                    <span>{{ form.errors.translated_fields['password'] | capitalize }} {{ form.errors.messages['password'] }}.</span>
                  </span>
                {%- endif -%}    
                
                <div class="form__input-wrapper" data-form-input-wrapper>
                  <span class="input_icon">
                    {% include 'input-lock-icon' %}
                  </span>
                  <input  class="form__input" placeholder="Confirm Password"
                  type="password"
                  name="customer-confirm-[password]"
                  id="{{ formId }}-confirm-password">
                  <span class="msg-error"></span>
                </div>

                <div class="fidget-column-2">
                  <div class="form-field small_field">
                    <div class="form__input-wrapper" data-form-input-wrapper>
                      <select class="form__input" name="customer-[gender]" id="{{ formId }}-customer-[gender]">
                        <option value="" disabled selected>Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                      </select>
                      <span class="msg-error"></span>
                    </div>
                  </div>
                  <div class="form-field large_field number_field">
                    <div class="form__input-wrapper" data-form-input-wrapper>
                      {% include 'counter-number' %}
                      <input class="form__input phone-validate" placeholder ="Your Mobile Number" type="tel" name="customer[phone_number]" id="{{ formId }}-PhoneNumber" value="{{ form.phone_number }}" pattern="[789][0-9]{9}" title="Please enter your 10-digit mobile number" >
                      <span class="msg-error"></span>
                    </div>
                  </div>
                </div>
                
                <div class="agree-terms-sec">
                  <div class="custom-checkbox-holder">
                    <div class="custom-checkbox-input-box">
                      <input type="checkbox" name="agree-terms" id="agree-tems">
                      <span><i><svg width="23" height="17" viewBox="0 0 23 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.63448 14.8756L8 15.2672L8.36553 14.8756L21.6345 0.658845C21.8229 0.456969 22.1393 0.446059 22.3412 0.634476L22.6823 0.268948L22.3412 0.634476C22.543 0.822893 22.5539 1.13929 22.3655 1.34116L8.36553 16.3412C8.27097 16.4425 8.1386 16.5 8 16.5C7.86141 16.5 7.72904 16.4425 7.63448 16.3412L7.26895 16.6823L7.63448 16.3412L0.634476 8.84116C0.446059 8.63929 0.456969 8.32289 0.658845 8.13448C0.86072 7.94606 1.17711 7.95697 1.36553 8.15885L7.63448 14.8756Z" stroke="#6679CC"></path></svg></i></span>
                    </div>
                    <label for="agree-tems">I agree to the Terms & Conditions</label>
                  </div>
                  <span class="msg-error" id="termsErrorMsg"></span>
                </div>

                <div class="btn-actions-wrapper">
                  <button type="submit" class="customer__button glb-btn">
                    <span>  {{ 'Sign Up' }}</span>
                  </button>
                </div>
                
                <div class="or-line-with-text"><span>OR SIGN UP WITH </span></div>
                <!-- Login with Social App -->
                {% include 'login-with-social' %}

                <div class="already-account-sec">Already have an account ? <a href="/account/login">Sign In</a></div>
              {% endform %}
            </div>
          </div>
        </div>
        
        {% if accountImage %}
        <div class="register-image-column">
          <div class="register-image-column">
            <div class="register_image_box">
              <img src="{{ accountImage | img_url: 'master' }}" alt="Image">
            </div>
          </div>
        </div>
        {% endif %}

      </div>
    </div>
  </div>
</div>

<script>

  document.addEventListener('DOMContentLoaded', function(event) {

    /*form validation start*/
    
    $('.form-validation').submit(function(e){
      removeMessage();
      let $this = $(this);
      var firstName = $this.find('input[name="customer[first_name]"]').val().trim();
      var lastName = $this.find('input[name="customer[last_name]"]').val().trim();
      var thisPhone = $this.find('input[name="customer[phone_number]"]').val().trim();
      var nameRegx = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z0-9]*)*$/;
      var regmm='^([0|+[0-9]{1,5})?([7-9][0-9]{9})$';
      var regmob = new RegExp(regmm);
      if (firstName == "" || firstName == null) {
        e.preventDefault();
        $this.find('input[name="customer[first_name]"]').addClass('form-error').next('.msg-error').text("Enter Your First Name").css('display','block');
      } else if (nameRegx.test(firstName) == false ){
        e.preventDefault();
        $this.find('input[name="customer[first_name]"]').addClass('form-error').next('.msg-error').text("Please Enter Valid First Name").css('display','block');
      } else {
        $this.find('input[name="customer[first_name]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      if (lastName == "" || lastName == null) {
        e.preventDefault();
        $this.find('input[name="customer[last_name]"]').addClass('form-error').next('.msg-error').text("Enter Your Last Name").css('display','block');
      } else if (nameRegx.test(lastName) == false ){
        e.preventDefault();
        $this.find('input[name="customer[last_name]"]').addClass('form-error').next('.msg-error').text("Please Enter Valid Last Name").css('display','block');
      } else {
        $this.find('input[name="customer[last_name]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      if (thisPhone.length != 10 || thisPhone == null || regmob.test(thisPhone) == false) {
        e.preventDefault();
        $this.find('input[name="customer[phone_number]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Phone Number").css('display','block');
      } else {
        $this.find('input[name="customer[phone_number]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      // Email Validation
      var thisEmail = $this.find('input[name="customer[email]"]').val();
      const reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      var proceed =  reg.test(thisEmail);
      if (thisEmail == "" || thisEmail == null || proceed == false) {
        e.preventDefault();
        $this.find('input[name="customer[email]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Email Address").css('display','block');
      } else {
        $this.find('input[name="customer[email]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Create Password Validation
      var passw =  /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/; 
      var thisPassword = $this.find('input[name="customer[password]"]').val();
      if (thisPassword == '' || thisPassword == null) {
        e.preventDefault();
        $this.find('input[name="customer[password]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Password").css('display','block');
      } else {
        if(thisPassword.match(passw)){
          console.log('matchrejecx');
          $this.find('input[name="customer[password]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
        }else {
          e.preventDefault();
          $this.find('input[name="customer[password]"]').addClass('form-error').next('.msg-error').text("Enter Password at least 8 characters, one lowercase letter, one uppercase letter, one numeric digit, and one special character").css('display','block');
          return false;
        } 
      }

      // Confirm Password
      var $password = $this.find('input[name="customer[password]"]').val();
      var $confirmPassword = $this.find('input[name="customer-confirm-[password]').val();
      if($confirmPassword == '' || $confirmPassword == null || $confirmPassword != $password) {
        e.preventDefault();
        $this.find('input[name="customer-confirm-[password]"]').addClass('form-error').next('.msg-error').text("Password not matched").css('display','block');
      } else {
        $this.find('input[name="customer[password]"], input[name="customer-confirm-[password]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Gender
      var $password = $this.find('select[name="customer-[gender]"]').val();
      if($password == null) {
        e.preventDefault();
        $this.find('select[name="customer-[gender]"]').addClass('form-error').next('.msg-error').text("Plese Select Gender").css('display','block');
      } else {
        $this.find('select[name="customer-[gender]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Terms Agree
      var $termsAgree = $this.find('#agree-tems');
      let $termsAgreeError = $this.find('#termsErrorMsg');
      if($($termsAgree).prop('checked') == false){
          e.preventDefault();
          $($termsAgreeError).text('** Please agree with terms and conditions.').css('display','block');
      } else {
          $($termsAgreeError).text('').css('display','none');
      }

    });
    setInterval(function(){
      let getForm = $('.form-validation');
      let getEvent = $(getForm).attr('onsubmit');
      if(getEvent !='') {
        $(getForm).removeAttr('onsubmit');
      }
    },200);
    // Remove Error After Checked
    $('form #agree-tems').change(function(){
      let $this2 = $(this).closest('form');
      console.log($this2)
      var $termsAgree = $this2.find('#agree-tems');
      let $termsAgreeError = $this2.find('#termsErrorMsg');
      if($($termsAgree).prop('checked') == false){
          $($termsAgreeError).text('** Please agree with terms and conditions.').css('display','block');
      } else {
          $($termsAgreeError).text('').css('display','none');
      }
    });
    $('form').on('keyup', 'input', function() {
      $(this).removeClass('form-error').next('.msg-error').css('display','none');
    });
    $('form').on('change', 'select', function() {
      $(this).removeClass('form-error').next('.msg-error').css('display','none');
    });
    function removeMessage(){    
      setTimeout(function(){
        $('.msg-error').css('display','none');
        $('.form__input').removeClass('form-error');
      },5000)
    }
    /*form validation end*/
  });
  
  window.addEventListener('load',function(){
    setTimeout(function(){
      $('.form-message').css('display','none');

      $('.form__error-message-wrapper').addClass('hide');
      $('input').removeClass('input--error');
    },5000);
  });

</script>

{% endcomment %}





{% assign accountImage = settings.account_right_image %}
<div class="register-page-wrapper">
  <div class="dia-container">
    <div class="register-page-inner-wrapper">
      <div class="register-form-header">
        <h1>{{ 'Sign Up' }}</h1>
      </div>
      <div class="register-page-two-col-row {% if accountImage == blank %}has_not_right_image{% endif %}">
        <div class="register-form-column">
          <div class="register-form-column-inner">
            <div class="form-wrapper">
              {%- assign formId = 'create_customer' -%}
              {% render "customer-fields", form_id: "j2tMlW" %}
            </div>
          </div>
        </div>
        
        {% if accountImage %}
        <div class="register-image-column">
          <div class="register-image-column">
            <div class="register_image_box">
              <img src="{{ accountImage | img_url: 'master' }}" alt="Image">
            </div>
          </div>
        </div>
        {% endif %}

      </div>
    </div>
  </div>
</div>

<script>

  document.addEventListener('DOMContentLoaded', function(event) {

    /*form validation start*/
    
    $('.form-validation').submit(function(e){
      removeMessage();
      let $this = $(this);
      var firstName = $this.find('input[name="customer[first_name]"]').val().trim();
      var lastName = $this.find('input[name="customer[last_name]"]').val().trim();
      var thisPhone = $this.find('input[name="customer[phone_number]"]').val().trim();
      var nameRegx = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z0-9]*)*$/;
      var regmm='^([0|+[0-9]{1,5})?([7-9][0-9]{9})$';
      var regmob = new RegExp(regmm);
      if (firstName == "" || firstName == null) {
        e.preventDefault();
        $this.find('input[name="customer[first_name]"]').addClass('form-error').next('.msg-error').text("Enter Your First Name").css('display','block');
      } else if (nameRegx.test(firstName) == false ){
        e.preventDefault();
        $this.find('input[name="customer[first_name]"]').addClass('form-error').next('.msg-error').text("Please Enter Valid First Name").css('display','block');
      } else {
        $this.find('input[name="customer[first_name]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      if (lastName == "" || lastName == null) {
        e.preventDefault();
        $this.find('input[name="customer[last_name]"]').addClass('form-error').next('.msg-error').text("Enter Your Last Name").css('display','block');
      } else if (nameRegx.test(lastName) == false ){
        e.preventDefault();
        $this.find('input[name="customer[last_name]"]').addClass('form-error').next('.msg-error').text("Please Enter Valid Last Name").css('display','block');
      } else {
        $this.find('input[name="customer[last_name]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      if (thisPhone.length != 10 || thisPhone == null || regmob.test(thisPhone) == false) {
        e.preventDefault();
        $this.find('input[name="customer[phone_number]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Phone Number").css('display','block');
      } else {
        $this.find('input[name="customer[phone_number]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }
      // Email Validation
      var thisEmail = $this.find('input[name="customer[email]"]').val();
      const reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      var proceed =  reg.test(thisEmail);
      if (thisEmail == "" || thisEmail == null || proceed == false) {
        e.preventDefault();
        $this.find('input[name="customer[email]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Email Address").css('display','block');
      } else {
        $this.find('input[name="customer[email]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Create Password Validation
      var passw =  /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/; 
      var thisPassword = $this.find('input[name="customer[password]"]').val();
      if (thisPassword == '' || thisPassword == null) {
        e.preventDefault();
        $this.find('input[name="customer[password]"]').addClass('form-error').next('.msg-error').text("Enter Your Valid Password").css('display','block');
      } else {
        if(thisPassword.match(passw)){
          console.log('matchrejecx');
          $this.find('input[name="customer[password]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
        }else {
          e.preventDefault();
          $this.find('input[name="customer[password]"]').addClass('form-error').next('.msg-error').text("Enter Password at least 8 characters, one lowercase letter, one uppercase letter, one numeric digit, and one special character").css('display','block');
          return false;
        } 
      }

      // Confirm Password
      var $password = $this.find('input[name="customer[password]"]').val();
      var $confirmPassword = $this.find('input[name="customer-confirm-[password]').val();
      if($confirmPassword == '' || $confirmPassword == null || $confirmPassword != $password) {
        e.preventDefault();
        $this.find('input[name="customer-confirm-[password]"]').addClass('form-error').next('.msg-error').text("Password not matched").css('display','block');
      } else {
        $this.find('input[name="customer[password]"], input[name="customer-confirm-[password]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Gender
      var $password = $this.find('select[name="customer-[gender]"]').val();
      if($password == null) {
        e.preventDefault();
        $this.find('select[name="customer-[gender]"]').addClass('form-error').next('.msg-error').text("Plese Select Gender").css('display','block');
      } else {
        $this.find('select[name="customer-[gender]"]').removeClass('form-error').next('.msg-error').empty().css('display','none');
      }

      // Terms Agree
      var $termsAgree = $this.find('#agree-tems');
      let $termsAgreeError = $this.find('#termsErrorMsg');
      if($($termsAgree).prop('checked') == false){
          e.preventDefault();
          $($termsAgreeError).text('** Please agree with terms and conditions.').css('display','block');
      } else {
          $($termsAgreeError).text('').css('display','none');
      }

    });
    setInterval(function(){
      let getForm = $('.form-validation');
      let getEvent = $(getForm).attr('onsubmit');
      if(getEvent !='') {
        $(getForm).removeAttr('onsubmit');
      }
    },200);
    // Remove Error After Checked
    $('form #agree-tems').change(function(){
      let $this2 = $(this).closest('form');
      console.log($this2)
      var $termsAgree = $this2.find('#agree-tems');
      let $termsAgreeError = $this2.find('#termsErrorMsg');
      if($($termsAgree).prop('checked') == false){
          $($termsAgreeError).text('** Please agree with terms and conditions.').css('display','block');
      } else {
          $($termsAgreeError).text('').css('display','none');
      }
    });
    $('form').on('keyup', 'input', function() {
      $(this).removeClass('form-error').next('.msg-error').css('display','none');
    });
    $('form').on('change', 'select', function() {
      $(this).removeClass('form-error').next('.msg-error').css('display','none');
    });
    function removeMessage(){    
      setTimeout(function(){
        $('.msg-error').css('display','none');
        $('.form__input').removeClass('form-error');
      },5000)
    }
    /*form validation end*/
  });
  
  window.addEventListener('load',function(){
    setTimeout(function(){
      $('.form-message').css('display','none');

      $('.form__error-message-wrapper').addClass('hide');
      $('input').removeClass('input--error');
    },5000);
  });

</script>


